/**
 * Created by Daniel on 1/29/2017.
 */
/*
var  MalWindow1 = new MalwareWindow(1,'99754106633f94d350db34d548d6091a');
var objs = [
    new InfoObject('Analysis',''),
    new InfoObject('File detail',''),
    new InfoObject('Relationships',''),
    new InfoObject('Additional Info',''),
    new InfoObject('Behavioural Info',''),
];

objs[0].addConnection('75%','');
objs[1].addConnection('65%','');
objs[2].addConnection('77%','');
objs[3].addConnection('74%','');
objs[3].addConnection('74%','');
objs[4].addConnection('45%','');
objs[4].addConnection('43%','');
objs[4].addConnection('43%','');

MalWindow1.addObjects(objs);
MalWindow1.constructContainer();
//MalWindow1.pointCollection.showPoints();

var MalWindow2 = new MalwareWindow(2,'Additional Info',MalWindow1);

var objs2 = [
    new InfoObject('File identification',''),
    new InfoObject('VirusTotal metadata','')
];

objs2[0].addConnection('75%','');
objs2[1].addConnection('65%','');
MalWindow2.addObjects(objs2);
objs[3].addSubWindow(MalWindow2);*/

$('.form_window button').click(function() {

   if ($('#malware_hash').val()!='')
    {
    $.post('http://46.101.240.170/v1/process/file', {email: $('#malware_hash').val()}, function(data){
        data = JSON.parse(data);



    });
    }
    else {
       var files = $('#malware_file').get(0).files;
       if (files.length > 0) {
           // create a FormData object which will be sent as the data payload in the
           // AJAX request
           var formData = new FormData();

           // loop through all the selected files and add them to the formData object
           for (var i = 0; i < files.length; i++) {
               var file = files[i];

               // add the files to formData object for the data payload
               formData.append('file', file, file.name);
           }

       }
       $.ajax({
           url: 'http://46.101.240.170/v1/process/file',
           type: 'POST',
           data: formData,
           processData: false,
           contentType: false,
           success: function(data){
               console.log('upload successful!\n' + data);
           }});
   }
});

